<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>–ê–≤—Ç–æ–±–∏–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –∫–Ω–∏–≥–∞ ‚Äî —Ä–µ–¥–∞–∫—Ç–æ—Ä</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="https://unpkg.com/suneditor/dist/css/suneditor.min.css">
  <style>
    body{max-width:900px;margin:2rem auto;font-family:system-ui,Arial,sans-serif}
    header{display:flex;gap:1rem;align-items:center;justify-content:space-between;flex-wrap:wrap}
    .actions{display:flex;gap:.75rem;align-items:center;flex-wrap:wrap}
    .muted{opacity:.75;font-size:.9rem}
    .btn{display:inline-block;padding:.6rem 1rem;border:1px solid #ccc;border-radius:.5rem;text-decoration:none;cursor:pointer}
    .btn-primary{background:#111;color:#fff;border-color:#111}
    .btn-ghost{background:#fff;color:#111}
    /* modal */
    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;z-index:9999}
    .modal{background:#fff;max-width:560px;width:calc(100% - 2rem);border-radius:.75rem;padding:1.25rem;box-shadow:0 10px 30px rgba(0,0,0,.2)}
    .modal h2{margin:.25rem 0 .25rem 0}
    .modal p{margin:.5rem 0 1rem 0}
    .row{display:flex;gap:.5rem;flex-wrap:wrap;justify-content:flex-end}
    .row a,.row button{flex:1}
    .donate-options{display:grid;grid-template-columns:1fr;gap:.5rem;margin:.5rem 0 1rem}
    .donate-box{border:1px solid #eee;border-radius:.5rem;padding:.75rem}
    .hidden{display:none}
  </style>
</head>
<body>
  <header>
    <div>
      <h1>–†–µ–¥–∞–∫—Ç–æ—Ä –∫–Ω–∏–≥–∏</h1>
      <div class="muted">Project ID: <span id="pid"></span></div>
      <p class="muted">–¢–µ—Å—Ç Cloudflare PDF: <a href="/test/pdf" target="_blank">/test/pdf</a></p>
    </div>
    <div class="actions">
      <button id="saveDraft" class="btn btn-ghost">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫</button>

      <!-- –ö–Ω–æ–ø–∫–∞: –æ—Ç–∫—Ä—ã—Ç—å –¢–û–õ–¨–ö–û –º–æ–¥–∞–ª–∫—É –¥–æ–Ω–∞—Ç–∞ -->
      <a id="openDonate" class="btn" href="#">–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</a>

      <!-- Peecho Async (–±—É–º–∞–∂–Ω–∞—è –ø–µ—á–∞—Ç—å) ‚Äî –æ—Å—Ç–∞–≤—å –∫–∞–∫ –±—ã–ª–æ -->
      <a id="peechoBtn" class="peecho-print-button btn btn-primary"
         href="https://www.peecho.com/"
         title="–ü–µ—á–∞—Ç—å –∫–Ω–∏–≥–∏"
         data-filetype="pdf" data-width="210" data-height="297" data-pages="100"
         data-noprice="true" data-currency="EUR" data-locale="ru_RU"
         data-thumbnail="https://placehold.co/300x400?text=Book"
         data-reference="">
         –û–ø–ª–∞—Ç–∏—Ç—å –ø–µ—á–∞—Ç—å (–±—É–º–∞–∂–Ω–∞—è)
      </a>
    </div>
  </header>

  <div class="muted" style="margin:.5rem 0 1rem">
    –ü–æ–¥—Å–∫–∞–∑–∫–∞: –ø—Ä–∏ <b>–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏</b> (Ctrl/Cmd+C) –∏–ª–∏ –ø–æ–ø—ã—Ç–∫–µ <b>–ø–µ—á–∞—Ç–∏</b> (Ctrl/Cmd+P) –º—ã –ø–æ–∫–∞–∂–µ–º –æ–∫–Ω–æ ¬´–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç¬ª. –≠—Ç–æ –¥–æ–±—Ä–æ–≤–æ–ª—å–Ω–æ.
  </div>

  <div id="editor" style="margin-top:1rem;"></div>

  <!-- SunEditor -->
  <script src="https://unpkg.com/suneditor/dist/suneditor.min.js"></script>
  <script src="https://unpkg.com/suneditor/src/lang/ru.js"></script>

  <!-- üëá –í–°–¢–ê–í–¨ –°–í–û–ô –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç Peecho (merchant button script) -->
  <script>
    (function(){
      var s=document.createElement("script"); s.async=true;
      // –ó–ê–ú–ï–ù–ò –Ω–∞ —Å–≤–æ–π URL –∏–∑ Peecho (–ø—Ä–∏–º–µ—Ä –Ω–∏–∂–µ ‚Äî –∑–∞–≥–ª—É—à–∫–∞)
      s.src="https://d3aln0nj58oevo.cloudfront.net/button/script/175871453943565676.js";
      document.head.appendChild(s);
    })();
  </script>

  <!-- DONATION MODAL (—Ç–æ–ª—å–∫–æ –¥–æ–Ω–∞—Ç) -->
  <div id="donateModal" class="modal-backdrop" role="dialog" aria-modal="true">
    <div class="modal">
      <h2>–ü–æ–¥–¥–µ—Ä–∂–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç üôè</h2>
      <p>–ï—Å–ª–∏ –≤–∞–º –ø–æ–ª–µ–∑–µ–Ω —ç—Ç–æ—Ç —Ä–µ–¥–∞–∫—Ç–æ—Ä –∏ –ø–µ—á–∞—Ç—å –∫–Ω–∏–≥ ‚Äî –º–æ–∂–µ—Ç–µ –æ—Å—Ç–∞–≤–∏—Ç—å –¥–æ–Ω–∞—Ç. –ï—Å–ª–∏ –Ω–µ —Å–µ–π—á–∞—Å ‚Äî –Ω–∞–∂–º–∏—Ç–µ ¬´–ó–∞–∫—Ä—ã—Ç—å¬ª.</p>

      <div class="donate-options">
        <!-- –í–∞—Ä–∏–∞–Ω—Ç 1: –ø—Ä–æ—Å—Ç—ã–µ —Å—Å—ã–ª–∫–∏ (—Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏) -->
        <div class="donate-box">
          <strong>–ë—ã—Å—Ç—Ä—ã–µ —Å–ø–æ—Å–æ–±—ã</strong>
          <div class="row" style="margin-top:.5rem">
            <a id="donateLink1" class="btn" target="_blank" rel="noopener">PayPal.Me</a>
            <a id="donateLink2" class="btn" target="_blank" rel="noopener">Ko-fi</a>
          </div>
        </div>

        <!-- –í–∞—Ä–∏–∞–Ω—Ç 2: –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∫–Ω–æ–ø–∫–∞ PayPal (–ø–æ –∂–µ–ª–∞–Ω–∏—é) -->
        <div id="paypalBox" class="donate-box hidden">
          <strong>–û–ø–ª–∞—Ç–∞ –ø—Ä—è–º–æ –∑–¥–µ—Å—å (PayPal)</strong>
          <div id="paypal-button-container" style="margin-top:.5rem"></div>
        </div>
      </div>

      <div class="row">
        <button id="donateClose" class="btn btn-ghost" type="button">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    </div>
  </div>

<script>
  // üîß –£–ö–ê–ñ–ò –°–í–û–ô LIVE CLIENT ID
  const PAYPAL_CLIENT_ID = "YOUR_LIVE_CLIENT_ID";

  function mountPayPalButtons() {
    // –ü–æ–¥–∫–ª—é—á–∞–µ–º SDK —Å –∑–∞–ø—Ä–æ—Å–æ–º –Ω–∞ –∫–∞—Ä—Ç–æ—á–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫
    const sdk = document.createElement('script');
    sdk.src =
      "https://www.paypal.com/sdk/js" +
      "?client-id=" + encodeURIComponent(PAYPAL_CLIENT_ID) +
      "&currency=EUR" +
      "&intent=capture" +
      "&enable-funding=card" +        // –ø—Ä–æ—Å–∏–º –ø–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫—É –∫–∞—Ä—Ç
      "&components=buttons" +
      "&commit=true";
    sdk.onload = () => {
      const container = document.getElementById('paypal-button-container');
      container.innerHTML = ""; // –æ—á–∏—Å—Ç–∏–º –ø–µ—Ä–µ–¥ —Ä–µ–Ω–¥–µ—Ä–æ–º

      // –í—Å–ø–æ–º–æ–≥–∞–ª–∫–∞: –æ—Ç—Ä–∏—Å–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É, –µ—Å–ª–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ
      const renderBtn = (fundingSource, style) => {
        const btn = paypal.Buttons({
          fundingSource,
          style: Object.assign({ layout: 'horizontal', label: 'donate', tagline: false }, style),
          createOrder: (data, actions) => actions.order.create({
            purchase_units: [{ amount: { value: '2.00', currency_code: 'EUR' } }] // –∏–∑–º–µ–Ω–∏ —Å—É–º–º—É –ø–æ –∂–µ–ª–∞–Ω–∏—é
          }),
          onApprove: (data, actions) => actions.order.capture().then(() => {
            // —Ç—É—Ç –º–æ–∂–µ—à—å –ø–æ–∫–∞–∑–∞—Ç—å ¬´—Å–ø–∞—Å–∏–±–æ¬ª
            const close = document.getElementById('donateClose');
            if (close) close.textContent = '–°–ø–∞—Å–∏–±–æ! –ó–∞–∫—Ä—ã—Ç—å';
          })
        });
        if (btn.isEligible()) btn.render('#paypal-button-container');
      };

      // 1) –°–Ω–∞—á–∞–ª–∞ –∫–∞—Ä—Ç–∞ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)
      renderBtn(paypal.FUNDING.CARD, { color: 'black' });

      // 2) –ó–∞—Ç–µ–º –æ–±—ã—á–Ω—ã–π PayPal
      renderBtn(paypal.FUNDING.PAYPAL, { color: 'gold' });
    };
    document.body.appendChild(sdk);
  }

  // –≤—ã–∑—ã–≤–µ–º mountPayPalButtons –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Ç–≤–æ–µ–π –¥–æ–Ω–∞—Ç-–º–æ–¥–∞–ª–∫–∏
  // –µ—Å–ª–∏ —É —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å openDonateModal(), –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤—å —Ç—É–¥–∞:
  //   if (PAYPAL_CLIENT_ID) { document.getElementById('paypalBox').classList.remove('hidden'); mountPayPalButtons(); }
</script>

</body>
</html>
